"use strict";(self["webpackChunkrocket_weather"]=self["webpackChunkrocket_weather"]||[]).push([[490],{1490:(t,e,a)=>{a.r(e),a.d(e,{default:()=>D});a(7280);var i=a(3673),o=a(2323),n=a(8880);const l={class:"col q-pt-lg q-px-md"},s={class:"col text-white text-center"},h={class:"text-h4 text-weight-light"},r={class:"text-h6 text-weight-light"},c={class:"text-h1 text-weight-thin q-my-lg relative-position"},d=(0,i._)("span",{class:"text-h4 relative-position degree"},"Â°C",-1),p={class:"col text-center"},g=["src"],u={key:1,class:"col column text-center text-white"},w=(0,i._)("div",{class:"col text-h2 text-weight-thin"},[(0,i.Uk)(" Rocket"),(0,i._)("br"),(0,i.Uk)("Weather ")],-1),m=(0,i._)("div",null,"Find my location",-1),x=(0,i._)("div",{class:"div col skyline"},null,-1);function _(t,e,a,_,y,k){const $=(0,i.up)("q-icon"),v=(0,i.up)("q-btn"),C=(0,i.up)("q-input"),f=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(f,{class:(0,o.C_)(["flex column",t.bgClass])},{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i.Wm)(C,{modelValue:t.search,"onUpdate:modelValue":e[0]||(e[0]=e=>t.search=e),onKeyup:(0,n.D2)(t.getWeatherBySearch,["enter"]),placeholder:"Search a city",dark:"",borderless:""},{before:(0,i.w5)((()=>[(0,i.Wm)($,{onClick:t.getLocation,name:"my_location"},null,8,["onClick"])])),append:(0,i.w5)((()=>[(0,i.Wm)(v,{onClick:t.getWeatherBySearch,round:"",dense:"",flat:"",icon:"search"},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])]),t.weatherData?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",s,[(0,i._)("div",h,(0,o.zw)(t.weatherData.name),1),(0,i._)("div",r,(0,o.zw)(t.weatherData.weather[0].main),1),(0,i._)("div",c,[(0,i._)("span",null,(0,o.zw)(Math.round(t.weatherData.main.temp)),1),d])]),(0,i._)("div",p,[(0,i._)("img",{src:`http://openweathermap.org/img/wn/${t.weatherData.weather[0].icon}@2x.png`},null,8,g)])],64)):((0,i.wg)(),(0,i.iD)("div",u,[w,(0,i.Wm)(v,{onClick:t.getLocation,class:"col",flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)($,{left:"",size:"3em",name:"my_location"}),m])),_:1},8,["onClick"])])),x])),_:1},8,["class"])}const y=(0,i.aZ)({name:"PageIndex",data(){return{search:"",weatherData:null,lat:null,lon:null,apiUrl:"http://api.openweathermap.org/data/2.5/weather",apiKey:"e55f47b2e16c11dcae14b41aca34a71e"}},computed:{bgClass(){if(this.weatherData)return this.weatherData.weather[0].icon.endsWith("n")?"bg-night":"bg-day"}},methods:{getLocation(){this.$q.loading.show(),this.$q.platform.is.electron?this.$axios.get("http://ip-api.com/json/").then((t=>{this.lat=t.data.lat,this.lon=t.data.lon,this.getWeatherByCoords()})):navigator.geolocation.getCurrentPosition((t=>{console.log("position: ",t),this.lat=t.coords.latitude,this.lon=t.coords.longitude,this.getWeatherByCoords()}))},getWeatherByCoords(){this.$q.loading.show(),this.$axios(`${this.apiUrl}?lat=${this.lat}&lon=${this.lon}&appid=${this.apiKey}&units=metric`).then((t=>{this.weatherData=t.data,this.$q.loading.hide()}))},getWeatherBySearch(){this.$q.loading.show(),this.$axios(`${this.apiUrl}?q=${this.search}&appid=${this.apiKey}&units=metric`).then((t=>{this.weatherData=t.data,this.$q.loading.hide()}))}}});var k=a(4379),$=a(6112),v=a(4554),C=a(522),f=a(7518),q=a.n(f);y.render=_;const D=y;q()(y,"components",{QPage:k.Z,QInput:$.Z,QIcon:v.Z,QBtn:C.Z})}}]);